### JVM相关知识
http://youzhixueyuan.com/jvm-classic-interview-questions-and-answers.html
#### 堆
A. 存放对象实例；基本上对象实例都从这里分配内存。
  - 堆内存大小，最低-Xms(默认内存1/64)，最高-Xmx(默认内存1/4)
  - 默认空余堆内存<40%时会自动增大堆内存分配，直至-Xmx设定的大小。这个比例是可设置的，用-XX:MinHeapFreeRatio(最小堆内存空余比)
  - 默认空余堆内存>70%时会自动减少堆内存分配，直至-Xms设定的大小。这个比例也是可设置的，用-XX:MaxHeapFreeRatio
B. 堆里的对象是线程不安全的，他说公开的内存空间。

#### 栈（虚拟机栈）每个线程独有一个栈空间
A. 存放对象的引用 和 基本数据类型的变量
B. 栈是线程安全的。
C. 虚拟机栈描述的是java方法执行的内存模型，每个java方法被执行都会同时创建 栈帧（Stack Frame）用于存储局部变量表、动态链接、方法出口等信息。本地方法栈则为虚拟机使用到的native方法服务。

#### 方法区
A. 存放运行时的常量池。
B. 存储已被虚拟机加载的类的信息、常量、静态变量、及时编译器编译后的代码等数据。


#### 程序计数器
当前线程所执行的字节码行号 指示器

### 总结
栈：线程私有，使用一段连续的内存空间；存放局部变量表、操作栈、动态链接、方法出口；使用-XSs配置；异常信息有StackOverflow、OutOfMemoryError

堆：线程共享，什么周期与虚拟机相同；保存对象的实例；使用-Xmx、-Xms、-Xmn配置；异常信息有OutOfMemoryError

程序计数器： 线程私有，占用内存小；用来存放字节码行号；

方法区：线程共享；存储类加载信息、常量、静态变量等；使用-XX:PermSize、-XX:MaxPermSize；异常信息有OutOfMemoryError




#### 备注常用jvm调优参数
-Xss 为jvm启动的每个线程（栈空间）分配的内存大小
-Xms 为jvm启动时分配的内存，即最小内存
-Xmx 为jvm运行过程中分配的最大内存
-Xmn 2g ：设置年轻代大小为2G。整个堆大小=年轻代大小 + 年老代大小 + 持久代大小 。持久代一般固定大小为64m，所以增大年轻代后，将会减小年老代大小。此值对系统性能影响较大，Sun官方推荐配置为整个堆的3/8。
-XX:MinHeapFreeRatio 最小堆内存占比，剩余可用堆内存低于min会自动增大堆内存分配
-XX:MaxHeapFreeRatio 最大对内存占比，剩余可用堆内存高于max会自动减少堆内存分配
-XX:PermSize 非堆初始化内存分配，即permanent size（持久化内存）
-XX:MaxPermSize 最大非堆内存分配
